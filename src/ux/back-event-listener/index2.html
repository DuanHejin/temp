<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>xxxx</title>
        <script src="../../../node_modules/jquery/dist/jquery.js"></script>
        <link
            rel="stylesheet"
            href="../../../node_modules/bootstrap/dist/css/bootstrap.css"
        />
        <script src="../../../node_modules/bootstrap/dist/js/bootstrap.js"></script>
        <style>
            .container {
                padding-top: 100px;
                display: flex;
                justify-content: center;
                align-items: center;
            }
        </style>

        <script>
            function jump() {
                location.href =
                    "http://127.0.0.1:5501/src/ux/back-event-listener/index3.html";
            }
        </script>
    </head>

    <body>
        <div class="container">
            <button class="btn btn-primary" onclick="jump()">index2</button>
        </div>
    </body>
    <script>
        // var hiddenProperty =
        //     "hidden" in document
        //         ? "hidden"
        //         : "webkitHidden" in document
        //         ? "webkitHidden"
        //         : "mozHidden" in document
        //         ? "mozHidden"
        //         : null;
        // var visibilityChangeEvent = hiddenProperty.replace(
        //     /hidden/i,
        //     "visibilitychange"
        // );
        // var onVisibilityChange = function () {
        //     if (document['hidden']) {
        //         console.log("页面非激活");
        //     } else {
        //         console.log("页面激活");
        //     }
        // };
        // // document.addEventListener(visibilityChangeEvent, onVisibilityChange);
        // document.addEventListener('visibilitychange', onVisibilityChange);
        function goBackCallback(event) {
            console.log(`|----    event`, event);
            // if (event.state && event.state.page === "wxRead") {
            //     setTimeout(() => {
            //         const url = 'http://www.baidu.com';

            //         window.location.href = url;
            //     }, 600);
            // }
        }
        window.addEventListener("popstate", goBackCallback, false);
    </script>
</html>
